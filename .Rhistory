coefficients <- readRDS("~/Dropbox/index-dev/3C/1-BC/4-linear-index/3-output/index_training_coef.Rds")
load("~/Dropbox/index-dev/3C/1-BC/4-linear-index/3-output/index_tr.Rdata")
scaling <- index_tr # index to scale by
scaling
scaling <- unname(scaling)
devtools::use_data(coefficients)
library(devtools)
library(roxygen2)
devtools::use_data(coefficients)
devtools::document()
devtools::use_data(coefficients)
library(usethis)
use_data(coefficients)
use_data(scaling)
devtools::use_vignette("introduction")
use_vignette("Introduction")
devtools::document()
devtools::install()
library(WID.BC)
load("~/Dropbox/data/3c-ext-validation/")
load("~/Dropbox/data/3c-ext-validation/beta_merged.Rdata")
test <- WID_BC(beta_merged)
devtools::install()
library(WID.BC)
test <- WID_BC(beta_merged)
w <- coefficients
scale <- scale
# compute index
ind <- na.omit(match(names(w),rownames(beta)))
beta <- beta_merged
# compute index
ind <- na.omit(match(names(w),rownames(beta)))
B <- beta[ind,]
w2 <- w[ind]
# compute index
intersect <- intersect(names(w), rownames(beta))
ind <- match(intersect, rownames(beta))
B <- beta[match(intersect, rownames(beta)),]
w2 <- w[match(intersect, names(w)),]
w2 <- w[match(intersect, names(w))]
identical(rownames(B), names(w2))
beta <- beta_merged
w <- coefficients
scale <- scale
# compute index
intersect <- intersect(names(w), rownames(beta))
B <- beta[match(intersect, rownames(beta)),]
if(!identical(intersect, names(w))){
cat("Warning: not all WID-BC-index CpGs found in your beta matrix. This could be, for instance, because you are using the 450k array instead of the EPIC array.\nIndex will still be computed.")
}
B <- beta[match(intersect, rownames(beta)),]
w <- w[match(intersect, names(w))]
B1 <- B*w1
B1 <- B*w
WID_BC <- colSums(B1,na.rm=T)
WID_BC <- -(WID_BC - mean(scale))/sd(scale)
scale <- scale
scaling <- scaling
WID_BC <- -(WID_BC - mean(scaling))/sd(scaling)
WID_BC
scaling
devtools::install()
library(WID.BC)
load("~/Dropbox/data/3c-ext-validation/beta_merged.Rdata")
test <- WID_BC(beta_merged)
load("~/Dropbox/index-dev/master-dataset/1-output/mdat.Rdata")
dat1 <- mdat[match(names(test), rownames(mdat)),]
identical(names(test), rownames(mdat))
identical(names(test), rownames(dat1))
plot(dat1$index_BC, test)
load("~/Dropbox/data/3c/beta_merged.Rdata")
test <- WID_BC(beta_merged)
load("~/Dropbox/index-dev/master-dataset/1-output/mdat.Rdata")
dat1 <- mdat[match(names(test), rownames(mdat)),]
identical(names(test), rownames(dat1))
plot(dat1$index_BC, test)
devtools::document()
